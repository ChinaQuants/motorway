!function(e){function t(n){if(a[n])return a[n].exports;var r=a[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){e.exports=a(1)},function(e,t,a){var n=a(2),r=React.createClass({displayName:"Pipeline",getInitialState:function(){return{groups:[]}},componentDidMount:function(){this.loadState()},render:function(){return Object.keys(this.state.groups).length?React.createElement("div",{className:"pipeline"},React.createElement(n,{groups:this.state.groups,lastMinutes:this.state.lastMinutes})):React.createElement("div",{className:"loader"},React.createElement("span",{className:"fa fa-circle-o-notch fa-spin"}))},getNodeData:function(e){var t={name:e[0],histogram:e[1].histogram,avgTime:Utils.getISODuration(e[1].avg_time_taken),percentile:Utils.getISODuration(e[1]["95_percentile"]),waiting:e[1].waiting},a=t.name.replace(/([A-Z])/g," $1");a=a.split("-")[0].split(" ");var n=a.splice(a.length-1,1).join(" ").toLowerCase();a=a.join(" "),t.title=a,t.nodeType=n,t.status=e[1].status;var r={ramp:"road",intersection:"exchange",tap:"road",transformer:"exchange"};return t.iconClass="fa fa-"+r[n],t.secondsRemaining=Utils.getSecondsFromDuration(t.avgTime)*t.waiting,t.url=PipelineSettings.detailUrlPrefix+t.name,t},loadState:function(){var e=this;$.getJSON(PipelineSettings.apiUrl,function(t){e.isMounted()&&e.setState({groups:t.groups,lastMinutes:t.last_minutes})}).done(function(){$("body").removeClass("disconnected")}).fail(function(){$("body").addClass("disconnected")}).always(function(){var t=$("#pulse");t.show(),setTimeout(function(){t.hide()},100),setTimeout(function(){e.loadState()},1e3)})}});ReactDOM.render(React.createElement(r,null),document.querySelector("#container"))},function(e,t,a){var n=a(3),r=React.createClass({displayName:"GroupContainer",getGroupSize:function(e){console.log(e);var t=.8,a=parseInt(Math.sqrt(e/t)),n=100/a,r=Math.ceil(e/a);return[n,100/r]},render:function(){var e=this,t=e.getGroupSize(Object.keys(e.props.groups).length),a={width:t[0]+"%",height:t[1]+"%"};return React.createElement("div",{className:"groups-container"},$.map(Object.keys(e.props.groups).sort(),function(t){var r=e.props.groups[t],s=t.replace(/([A-Z])/g," $1");s=s.split("-")[0].split(" ");var c=s.splice(s.length-1,1).join(" ").toLowerCase();s=s.join(" ");var o={ramp:"road",intersection:"exchange",tap:"road",transformer:"exchange"}[c],i={ramp:"blue",intersection:"green",tap:"blue",transformer:"green"}[c],l="fa fa-"+o,u="circle-icon circle-icon-"+i,p=Utils.formatISODuration(Utils.getISODuration(r.avg_time_taken));return React.createElement("div",{className:"group",key:t,style:a},React.createElement("div",{className:"group-content"},React.createElement("div",{className:"group-content-inner"},React.createElement("h1",null,React.createElement("span",{className:u},React.createElement("i",{className:l})),s),React.createElement("ul",{className:"status-icons"},$.map(Object.keys(r.processes),function(e){var t=r.processes[e],a="";switch(t.state){case"available":a="fa-check-circle";break;case"busy":a="fa-cog fa-spin";break;case"overloaded":a="fa-exclamation-triangle flash"}var n="fa "+a;return React.createElement("li",{key:e},React.createElement("span",{className:n,title:e}))})),React.createElement("div",{className:"stats"},React.createElement("div",{className:"col"},React.createElement("span",{className:"label"},"Items in queue"),r.waiting),React.createElement("div",{className:"col"},React.createElement("span",{className:"label"},"Avg/item"),React.createElement("span",{className:"small"},"xÌ„:")," ",p))),React.createElement(n,{histogram:r.histogram,lastMinutes:e.props.lastMinutes})))}))}});e.exports=r},function(e,t){var a=React.createClass({displayName:"NodeGraph",render:function(){var e=this.props.histogram,t=0;$.each(e,function(e,a){t=Math.max(t,a.success_count+a.error_count+a.timeout_count)}),$.each(e,function(a,n){t>0?(e[a].success_percentage=n.success_count/t*100,e[a].error_percentage=n.error_count/t*100,e[a].timeout_percentage=n.timeout_count/t*100):(e[a].success_percentage=0,e[a].error_percentage=0,e[a].timeout_percentage=0)});var a=this.props.lastMinutes.map(function(t){return{minute:t,value:e[t]}});return React.createElement("div",{className:"node-graph"},a.map(function(e){var t={height:parseInt(100-parseInt(e.value.success_percentage)-parseInt(e.value.error_percentage)-parseInt(e.value.timeout_percentage))+"%"},a={height:parseInt(e.value.success_percentage)+"%"},n={height:parseInt(e.value.timeout_percentage)+"%"},r={height:parseInt(e.value.error_percentage)+"%"};return React.createElement("span",{className:"node-graph-bar",key:e.minute},React.createElement("span",{className:"node-graph-bar-part node-graph-blank",style:t}),React.createElement("span",{className:"node-graph-bar-part node-graph-success",style:a},e.value.success_count),React.createElement("span",{className:"node-graph-bar-part node-graph-timeout",style:n},e.value.timeout_count),React.createElement("span",{className:"node-graph-bar-part node-graph-error",style:r},e.value.error_count))}))}});e.exports=a}]);